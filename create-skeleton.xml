<project name="create-skeleton" default="create-archive">
	
	<property name="build.dir" value="build" />
	<property name="archive.dir" value="${build.dir}/archive" />
	
	<target name="create-archive">
		<delete dir="${archive.dir}" />
		<mkdir dir="${archive.dir}" />

		<copy todir="${archive.dir}">
			<fileset dir=".">
				<exclude name="create-skeleton.xml" />
				<exclude name=".classpath" />
				<exclude name=".project" />
				<exclude name="lib/**" />
				<exclude name="build/**" />
				<exclude name="webapp/WEB-INF/classes/**" />
				<exclude name="webapp/WEB-INF/lib/**" />
				<exclude name="build.xml" />
				<exclude name="ivy.xml" />
				<exclude name=".settings/org.eclipse.wst.common.component" />
			</fileset>
		</copy>
		
		<copy todir="${archive.dir}">
			<fileset dir=".">
				<include name="build.xml" />
				<include name="ivy.xml" />
				<include name=".settings/org.eclipse.wst.common.component" />
			</fileset>
			<filterset begintoken="&quot;" endtoken="&quot;">
				<filter token="riot-skeleton" value="&quot;@project-name@&quot;" />
			</filterset>
		</copy>
		
		<zip destfile="${build.dir}/skeleton.zip" basedir="${archive.dir}" />
		<scp file="${build.dir}/skeleton.zip" 
			todir="${user.name}@riotfamily.org:/var/www/riotfamily.org/htdocs/setup"
			keyfile="${user.home}/.ssh/id_rsa" passphrase="" trust="true" />

	</target>
	
</project>